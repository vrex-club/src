import { Head, Header, Footer } from "../components";
import { category, games } from "../games.json" with { type: "json" }

export async function loader({ params }) {
    for (const cat of category) {
        if (cat.id === params.category) {
            console.log("Category found:", cat);
            return cat;
        }
    };
    throw new Error(`Category ${params.category} not found`);
}

export default function Category({ loaderData }) {
    const categoryGames = [];
    loaderData.games.forEach((_game) => {
        const game = games[_game];
        categoryGames.push(<div key={game.id} className="item"> {/* skin flat"> */}
            <div className="layer-wrapper layout-1206">
                <div className="layer-media element_1587187627902" id="">
                    <div className="element element_1587190790308  element-media ">
                        <a target="_self" href={`/game/${game.id}`}>
                            <img
                                loading="lazy"
                                decoding="async"
                                src={game.thumb}
                                // className="attachment-large size-large wp-post-image"
                                alt=""
                            />
                        </a>
                    </div>
                </div>
                <div className="layer-content element_1587187714568" id="">
                    <div className="element element_1587187895341  title ">
                        <a
                            target="_blank"
                            href={`/game/${game.id}`}
                        >
                            {game.name}
                        </a>
                    </div>
                    <div className="element element_1587187729822  excerpt ">
                        {game.description.split(" ").splice(0, 20).join(" ")}
                        <a
                            target="_self"
                            href="../dark-forest-lost-story-vr/index.html"
                        >
                            Read more
                        </a>
                    </div>
                </div>
            </div>
        </div>
    )});
    return <>
        <head>
            <Head pageName={loaderData.name} />
        </head>
        <body>
            <section className="pageinfo fadeInDown animated wow">
                <div className="header__fon111" />
                <div className="container">
                    <h1>Вы в разделе Horror | V-rex</h1>
                    <div className="pageinfo__content">
                    <div id="post-grid-lazy-1222" className="post-grid-lazy">
                        <img decoding="async" alt="" src="#" />
                    </div>
                    <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                        __html:
                            "\n      #post-grid-1222 {\n        display: none;\n      }\n\n      .post-grid-lazy {\n        text-align: center;\n      }\n    "
                        }}
                    />
                    <div
                        data-options='{"id":"1222","lazy_load":"yes","masonry_enable":"no","view_type":"grid"}'
                        id="post-grid-1222"
                        className="post-grid grid"
                    >
                        <div className="grid-items">
                            {categoryGames}
                        </div>
                        <div className="pagination">
                        <div className="paginate">
                            <span aria-current="page" className="page-numbers current">
                            1
                            </span>
                            <a className="page-numbers" href="page/2/index.html">
                            2
                            </a>
                            <a className="next page-numbers" href="page/2/index.html">
                            Следующая »
                            </a>
                        </div>
                        <style
                            type="text/css"
                            dangerouslySetInnerHTML={{
                            __html:
                                "\n    #post-grid-1222 .pagination .page-numbers {\n      font-size: 16px;\n      color: #fff;\n      background: #646464;\n    }\n\n    #post-grid-1222 .pagination .page-numbers:hover,\n    #post-grid-1222 .pagination .page-numbers.current {\n      background: #4b4b4b;\n    }\n  "
                            }}
                        />
                        </div>
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n            .layout-1206 .element_1587187627902 {\n                            }\n\n                    "
                        }}
                        />
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n        .layout-1206 .element_1587190790308 {\n            overflow: hidden;\n                    }\n\n        .layout-1206 .element_1587190790308 img {\n            max-width: 100%;\n            height: auto;\n        }\n\n        @media only screen and (min-width: 1024px) {\n            .layout-1206 .element_1587190790308 {\n                height: auto;\n                            }\n        }\n\n        @media only screen and (min-width: 768px) and (max-width: 1023px) {\n            .layout-1206 .element_1587190790308 {\n                height: auto;\n                            }\n        }\n\n        @media only screen and (min-width: 0px) and (max-width: 767px) {\n            .layout-1206 .element_1587190790308 {\n                height: auto;\n                            }\n        }\n    "
                        }}
                        />
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n            .layout-1206 .element_1587187714568 {\n                margin: 10px;\n                            }\n\n                    "
                        }}
                        />
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n        .layout-1206 .element_1587187895341 {\n            font-size: 18px;\n            margin: 5px 0px;\n            text-align: left;\n                    }\n\n        .layout-1206 .element_1587187895341 a {\n            font-size: 18px;\n            margin: 5px 0px;\n            text-align: left;\n                    }\n    "
                        }}
                        />
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n        .layout-1206 .element_1587187729822 {\n            font-size: 13px;\n            margin: 0px 0px;\n            text-align: left;\n                    }\n\n        .layout-1206 .element_1587187729822 a {\n            font-size: 13px;\n                    }\n    "
                        }}
                        />
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n      .layout-1206 a{text-decoration:none}.layout-1206{vertical-align:top}.layout-1206 .layer-content{padding:10px}    "
                        }}
                        />
                        <style
                        type="text/css"
                        dangerouslySetInnerHTML={{
                            __html:
                            "\n    #post-grid-1222 {\n      padding: 10px;\n          }\n\n    #post-grid-1222 .item {\n      padding: 0px;\n      background: #fff;\n          }\n\n    #post-grid-1222 .item .layer-media {\n      height:auto;    }\n\n    @media only screen and (min-width: 0px) and (max-width: 767px) {\n      #post-grid-1222 .grid-items {\n        display: grid;\n        grid-template-columns: 1fr ;\n        column-gap: 10px;\n        row-gap: 10px;\n              }\n\n      #post-grid-1222 .item {\n        height:auto;      }\n    }\n\n    @media only screen and (min-width: 768px) and (max-width: 1023px) {\n      #post-grid-1222 .grid-items {\n        display: grid;\n        grid-template-columns: 1fr 1fr ;\n        column-gap: 10px;\n        row-gap: 10px;\n              }\n\n      #post-grid-1222 .item {\n        max-height:auto;      }\n    }\n\n    @media only screen and (min-width: 1024px) {\n      #post-grid-1222 .grid-items {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr ;\n        column-gap: 10px;\n        row-gap: 10px;\n              }\n\n      #post-grid-1222 .item {\n        height:auto;      }\n    }\n\n      "
                        }}
                        />
                    </div>
                    </div>
                </div>
            </section>
        </body>
    </>
}
